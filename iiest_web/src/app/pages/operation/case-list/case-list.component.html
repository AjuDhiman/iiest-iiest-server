<div class="app-content pt-3 p-md-3 p-lg-4">
    <!-- bread crumb -->
    <div class="d-flex w-100 justify-content-between">
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item active font-small" aria-current="page"><a>Case List</a></li>
            </ol>
        </nav>
        <fa-icon [icon]="faArrowRotateForward" class="selector" (click)="refresh()"></fa-icon>
    </div>
    <!-- Tabs for Filtering by Product -->
    <ul class="nav nav-pills w-100 d-flex justify-content-start m-0 p-0"
        *ngIf="(panelType==='FSSAI Relationship Panel') && !isRecipientList">
        <li class="nav-item d-flex border border-1 rounded-top-3 py-2 px-2">
            <a class="nav-link mx-1" style="cursor: pointer;" [ngClass]="{'active': productType==='Fostac'}"
                (click)="toogleTabs('Fostac')">Fostac</a>
            <a class="nav-link mx-1" style="cursor: pointer;" [ngClass]="{'active': productType==='Foscos'}"
                (click)="toogleTabs('Foscos')">Foscos</a>
            <a class="nav-link mx-1" style="cursor: pointer;" [ngClass]="{'active': productType==='HRA'}"
                (click)="toogleTabs('HRA')">HRA</a>
            <a class="nav-link mx-1" style="cursor: pointer;" [ngClass]="{'active': productType==='Medical'}"
                (click)="toogleTabs('Medical')">Medical</a>
            <a class="nav-link mx-1" style="cursor: pointer;" [ngClass]="{'active': productType==='Water Test Report'}"
                (click)="toogleTabs('Water Test Report')">Water Test</a>
            <a class="nav-link mx-1" style="cursor: pointer;" [ngClass]="{'active': productType==='Khadya Paaln'}"
                (click)="toogleTabs('Khadya Paaln')">Khadya Paaln</a>
            <a class="nav-link mx-1" style="cursor: pointer;" [ngClass]="{'active': productType==='Food Labeling'}"
                (click)="toogleTabs('Food Labeling')">Food Labeling</a>
        </li>
    </ul>
    <div class="container-xxl border border-1 rounded-3 rounded-start-0 pt-3 p-md-3 p-lg-4 m-0">
        <div class="row g-3 mb-4 align-items-center justify-content-between">
            <div class="col-auto">
                <!-- List Type according to Product -->
                <h1 class="app-page-title mb-0">{{isRecipientList?'Recipient List':'Case List'}} of {{productType}}

                </h1>
            </div>
            <div class="col-auto">
                <div class="page-utilities">
                    <div class="row g-2 justify-content-start justify-content-md-end align-items-center">
                        <!-- Buttons for filtering list accordig to service type -->
                        <ng-container *ngIf="!forTraining">
                            <div class="col-auto" *ngIf="productType==='Fostac'">
                                <button class="btn btn-sm mx-1"
                                    [ngClass]="serviceType==='Catering'?'btn-primary':'btn-secondary'" type="button"
                                    (click)="setServiceType('Catering')">
                                    Catering
                                </button>
                                <button class="btn btn-sm mx-1"
                                    [ngClass]="serviceType==='Retail'?'btn-primary':'btn-secondary'" type="button"
                                    (click)="setServiceType('Retail')">
                                    Retail
                                </button>
                            </div>
                            <div *ngIf="productType==='Foscos'" class="col-auto">
                                <button class="btn btn-sm mx-1"
                                    [ngClass]="serviceType==='Registration'?'btn-primary':'btn-secondary'" type="button"
                                    (click)="setServiceType('Registration')">
                                    Registration
                                </button>
                                <button class="btn btn-sm mx-1"
                                    [ngClass]="serviceType==='State'?'btn-primary':'btn-secondary'" type="button"
                                    (click)="setServiceType('State')">
                                    State
                                </button>
                            </div>
                        </ng-container>
                        <!-- Select box for selecting no of item to show in list -->
                        <div class="col-auto">
                            <select class="form-select form-select-sm w-auto cursor-pointer" [(ngModel)]="itemsNumber"
                                (click)="pageNumber=1">
                                <option value=10>10</option>
                                <option value=25 selected>25</option>
                                <option value=50>50</option>
                                <option value=100>100</option>

                            </select>
                        </div>
                        <!-- search box -->
                        <div class="col-auto">
                            <form class="form">
                                <div class="input-group">
                                    <fa-icon [icon]="faMagnifyingGlass" class="fa-sm"
                                        style="position: absolute; padding: 9px 10px;"
                                        [ngClass]="isSearch === false ? 'd-block':'d-none'"></fa-icon>
                                </div>
                                <input type="text" id="search-orders" [(ngModel)]="searchQuery" name="searchorders"
                                    class="form-control form-control-sm search-orders" (input)="onSearchChange()">
                            </form>
                        </div>
                        <!-- select box for changing search filter  -->
                        <div class="col-auto">
                            <select class="form-select form-select-sm w-auto cursor-pointer"
                                [(ngModel)]="selectedFilter">
                                <option value="byShopId">Search by Shop Id</option>
                                <option *ngIf="productType==='Fostac' && isRecipientList" value="byRecipientName"
                                    selected>Search by
                                    Recipient Name</option>
                                <option *ngIf="productType==='Foscos' || productType === 'HRA'" value="byManagerName"
                                    selected>Search by Manager Name</option>
                                <option value="byFboName">Search by Fbo Name</option>
                                <option value="byOwnerName">Search by Owner Name</option>
                                <option value="byContact">Search by Contact no.</option>
                                <option value="byLocation">Search by Location</option>
                            </select>
                        </div>
                        <!-- <div class="col-auto">
                            <fa-icon (click)="exportToCsv()" class="fa-2xl cursor-pointer"
                                style="margin: 7px 7px; color: #1957a9;" [icon]="faFileCsv"
                                title="Export as CSV"></fa-icon>
                           
                        </div> -->
                    </div><!--//row-->
                </div><!--//table-utilities-->
            </div><!--//col-auto-->
        </div><!--//row-->

        <div class="tab-content" id="orders-table-tab-content">
            <div class="tab-pane fade show active" id="orders-all" role="tabpanel" aria-labelledby="orders-all-tab">
                <div class="app-card app-card-orders-table shadow-sm mb-5">
                    <div class="app-card-body">
                        <div class="table-responsive">

                            <!--panelType==='FSSAI Supervisor Panel' && forTraining -->
                            <table *ngIf="(panelType==='FSSAI Supervisor Panel' && forTraining) || isRecipientList"
                                class="table app-table-hover table-striped mb-0 text-left" id="data-to-export">
                                <thead>
                                    <tr>
                                        <th class="cell">S.No</th>
                                        <th class="cell text-center">Recipient Name</th>
                                        <th class="cell">Fbo Name</th>
                                        <th class="cell">Owner Name</th>
                                        <th class="cell">BO Id</th>
                                        <th class="cell">Shop Id</th>
                                        <th class="cell">Contact No.</th>
                                        <th class="cell">District</th>
                                        <th class="cell">State</th>
                                        <!-- <th *ngIf="forTraining" class="cell">Enrollment No.</th> -->
                                        <!-- <th class="cell">Type of Licence</th> -->
                                        <th class="cell">Sales Date</th>
                                        <th class="cell text-centre">Sales Executive</th>
                                        <th class="cell text-center">Verification Status</th>
                                        <!-- <th class="cell">Action</th> -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="list-tr"
                                        *ngFor="let data of filteredData | paginate: { itemsPerPage: itemsNumber, currentPage: pageNumber, id: 'case-list' }; let i=index">
                                        <td class="cell"><span
                                                class="truncate">{{i+itemsNumber*(pageNumber-1)+1}}</span></td>
                                        <td class="cell"><span class="truncate text-capitalize selector"
                                                (click)="collectResData('Fostac', data._id)"
                                                title="View Case text-capitalize">{{data.name.toLowerCase()}}</span>
                                        </td>

                                        <td class="cell"><span [title]="data.salesInfo.fboInfo.fbo_name.toLowerCase()"
                                                class="truncate text-capitalize text-w-150">{{data.salesInfo.fboInfo.fbo_name.toLowerCase()}}</span>
                                        </td>
                                        <td class="cell"><span
                                                class="truncate text-capitalize">{{data.salesInfo.fboInfo.owner_name.toLowerCase()}}</span>
                                        </td>
                                        <td class="cell"><span
                                                class="truncate">{{data.salesInfo.fboInfo.boInfo.customer_id}}</span>
                                        </td>
                                        <td class="cell"><span
                                                class="truncate">{{data.salesInfo.fboInfo.customer_id}}</span></td>
                                        <td class="cell"><span class="truncate">{{data.phoneNo}}</span></td>
                                        <td class="cell"><span
                                                class="truncate text-capitalize">{{data.salesInfo.fboInfo.district.toLowerCase()}}</span>
                                        </td>
                                        <td class="cell"><span
                                                class="truncate text-capitalize">{{data.salesInfo.fboInfo.state.toLowerCase()}}</span>
                                        </td>
                                        <!-- <td *ngIf="forTraining" class="cell">{{data.enrollment_no}}<span
                                                class="truncate"></span>
                                        </td> -->
                                        <td class="cell"><span
                                                class="truncate text-capitalize">{{getFormattedSalesDate(data.salesInfo.createdAt.toString())}}</span>
                                        </td>
                                        <td class="cell"><span
                                                class="truncate text-capitalize text-center">{{data.salesInfo.employeeInfo.employee_name.toLowerCase()}}</span>
                                        </td>
                                        <td class="cell text-center"><span class="truncate text-capitalize"
                                                [ngClass]="data.verificationInfo.length?'text-success':'text-danger'">
                                                {{data.verificationInfo.length?'Verified':'Pending'}}
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                                <tbody *ngIf="!filteredData || filteredData.length===0">
                                    <tr>
                                        <td colspan="15" class="text-center fw-bold">----------------- No Data Found
                                            ----------------</td>
                                    </tr>
                                </tbody>
                            </table>
                            <!--FOSTAC Table -->
                            <table *ngIf="productType==='Fostac' && !isRecipientList"
                                class="table app-table-hover table-striped mb-0 text-left" id="data-to-export">
                                <thead>
                                    <tr>
                                        <th class="cell">S.No</th>
                                        <th class="cell">Manager Name</th>
                                        <th class="cell">Fbo Name</th>
                                        <th class="cell">Owner Name</th>
                                        <th class="cell">BO Id</th>
                                        <th class="cell">Shop Id</th>
                                        <th class="cell">Recipient No.</th>
                                        <th class="cell">Foatac Total</th>
                                        <th class="cell text-center">Sales Date</th>
                                        <th class="cell text-center">Sales Executive</th>
                                        <th class="cell text-center">Verification Status</th>
                                        <th class="cell">Action</th>
                                    </tr>
                                </thead>
                                <tbody>

                                    <tr
                                        *ngFor="let data of filteredData | paginate: { itemsPerPage: itemsNumber, currentPage: pageNumber, id:'case-list' }; let i=index">
                                        <td class="cell"><span class="truncate">{{i+itemsNumber*(pageNumber-1)+1}}
                                            </span></td>
                                        <td class="cell"><span class="truncate text-capitalize selector"
                                                (click)="collectResData('Fostac', data._id)">
                                                <!-- (click)="doSale(data)" > -->

                                                {{data.salesInfo.fboInfo.boInfo.manager_name &&
                                                data.salesInfo.fboInfo.boInfo.manager_name.toLowerCase()}}
                                            </span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo else noData" class="cell"><span
                                                [title]="data.salesInfo.fboInfo.fbo_name.toLowerCase()"
                                                class="truncate text-capitalize text-w-150">{{data.salesInfo.fboInfo.fbo_name.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell"><span
                                                class="truncate text-capitalize">{{data.salesInfo.fboInfo.owner_name.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell"><span
                                                class="truncate text-capitalize">{{data.salesInfo.fboInfo.boInfo.customer_id}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell"><span
                                                class="truncate text-capitalize">{{data.salesInfo.fboInfo.customer_id}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo" class="cell text-center"><span
                                                (click)="recipient(data.salesInfo, 'Fostac')"
                                                class="truncate active-selection">{{data.salesInfo.fostacInfo.recipient_no}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo" class="cell"><span
                                                class="truncate">{{data.salesInfo.fostacInfo.fostac_total |
                                                inrAmount}}</span>
                                        </td>
                                        <td class="cell text-center"><span
                                                class="truncate">{{getFormattedSalesDate(data.createdAt)}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo && data.salesInfo.employeeInfo; else noData"
                                            class="cell text-center">
                                            <span
                                                class="truncate text-capitalize">{{data.salesInfo.employeeInfo.employee_name.toLowerCase().split('
                                                ')[0]}}</span>
                                        </td>
                                        <!-- <td class="cell text-center"><span class="truncate text-capitalize "
                                                [ngClass]="data.checkStatus === 'Approved'?'text-success':'text-danger'">
                                                {{data.checkStatus === 'Approved'?'Verified':'Pending'}}
                                            </span>
                                        </td> -->
                                        <td class="cell text-center">
                                            <span *ngIf="data.resultTextClass && !data.isForDocumentsNum"
                                                [ngClass]="data.resultTextClass" style="font-size: x-small;"
                                                class="badge align-self-baseline make-short" [title]="data.resultText">
                                                {{data.resultText}}
                                            </span>

                                            <div class="">
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-success mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.approvedDocs}}
                                                </span>
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-danger mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.pendingDocs}}
                                                </span>
                                            </div>
                                        </td>
                                        <td class="cell"><span class="truncate text-capitalize">
                                                <fa-icon class="fa-l selector mx-2"
                                                    style="margin-right: 7px; color: #1957a9;" [icon]="faEye"
                                                    (click)="viewFboDetails($event, data.salesInfo)"
                                                    title="View Detail"></fa-icon>

                                            </span>
                                        </td>
                                        <ng-template #noData>
                                            <td class="cell">
                                                <span class="truncate">-</span>
                                            </td>
                                        </ng-template>
                                    </tr>
                                </tbody>
                                <tbody *ngIf="!filteredData || filteredData.length===0">
                                    <tr>
                                        <td colspan="15" class="text-center fw-bold">----------------- No Data Found
                                            ----------------</td>
                                    </tr>
                                </tbody>
                            </table>
                            <!--HRA Table -->
                            <table *ngIf="productType==='HRA' || (panelType==='FSSAI Supervisor Panel' && forAudit)"
                                class="table app-table-hover table-striped mb-0 text-left" id="data-to-export">
                                <thead>
                                    <tr>
                                        <th class="cell">S.No</th>
                                        <th class="cell">Manager Name</th>
                                        <th class="cell">Fbo Name</th>
                                        <th class="cell">Owner Name</th>
                                        <th class="cell">BO Id</th>
                                        <th class="cell">Shop Id</th>
                                        <!-- <th class="cell">KOB</th>
                                        <th class="cell">No. of Food Handlers</th> -->
                                        <th class="cell">HRA Total</th>
                                        <!-- <th class="cell">State</th> -->
                                        <th class="cell">Sales Date</th>
                                        <th class="cell text-center">Sales Executive</th>
                                        <th class="cell text-center">Verification Status</th>
                                        <th class="cell">Action</th>
                                        <!-- <th class="cell">Stage</th> -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of filteredData | paginate: { itemsPerPage: itemsNumber, currentPage: pageNumber, id:'case-list' }; let i=index">
                                        <td class="cell"><span
                                                class="truncate">{{i+itemsNumber*(pageNumber-1)+1}}</span></td>
                                        <td class="cell"><span class="truncate text-capitalize selector"
                                                (click)="collectResData('HRA', data._id)">{{data.managerName.toLowerCase()}}</span>
                                        </td>

                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell"><span
                                                [title]="data.salesInfo.fboInfo.fbo_name.toLowerCase()"
                                                class="truncate text-capitalize text-w-150">{{data.salesInfo.fboInfo.fbo_name.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell"><span
                                                class="truncate text-capitalize">{{data.salesInfo.fboInfo.owner_name.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell"><span
                                                class="truncate text-capitalize">{{data.salesInfo.fboInfo.boInfo.customer_id}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell"><span
                                                class="truncate text-capitalize">{{data.salesInfo.fboInfo.customer_id}}</span>
                                        </td>
                                        <!-- <td class="cell"><span
                                                class="truncate">{{data.kob}}</span>
                                        </td>
                                        <td class="cell text-center"><span
                                                class="truncate">{{data.foodHandlersCount}}</span></td> -->
                                        <td *ngIf="data.salesInfo.fboInfo" class="cell"><span
                                                class="truncate">{{data.salesInfo.hraInfo.hra_total | inrAmount}}</span>
                                        </td>
                                        <td *ngIf="productType==='HRA'" class="cell"><span
                                                class="truncate">{{getFormattedSalesDate(data.salesInfo.createdAt)}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo && data.salesInfo.employeeInfo; else noData"
                                            class="cell text-center">
                                            <span
                                                class="truncate text-capitalize">{{data.salesInfo.employeeInfo.employee_name.toLowerCase().split('
                                                ')[0]}}</span>
                                        </td>
                                        <!-- <td class="cell text-center"><span class="truncate text-capitalize "
                                                [ngClass]="data.verificationInfo.length?'text-success':'text-danger'">
                                                {{data.verificationInfo.length?'Verified':'Pending'}}
                                            </span>
                                        </td> -->
                                        <td class="cell text-center">
                                            <span *ngIf="data.resultTextClass && !data.isForDocumentsNum"
                                                [ngClass]="data.resultTextClass" style="font-size: x-small;"
                                                class="badge align-self-baseline make-short" [title]="data.resultText">
                                                {{data.resultText}}
                                            </span>

                                            <div class="">
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-success mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.approvedDocs}}
                                                </span>
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-danger mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.pendingDocs}}
                                                </span>
                                            </div>
                                        </td>
                                        <td class="cell"><span class="truncate text-capitalize">
                                                <fa-icon class="fa-l selector mx-2"
                                                    style="margin-right: 7px; color: #1957a9;" [icon]="faEye"
                                                    (click)="viewFboDetails($event, data.salesInfo)"
                                                    title="View Detail"></fa-icon>

                                            </span>
                                        </td>
                                        <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span class="truncate">-</span>
                                        </td> -->
                                        <ng-template #noData>
                                            <td class="cell">
                                                <span class="truncate">-</span>
                                            </td>
                                        </ng-template>
                                    </tr>
                                </tbody>
                                <tbody *ngIf="!filteredData || filteredData.length===0">
                                    <tr>
                                        <td colspan="15" class="text-center fw-bold">----------------- No Data Found
                                            ----------------</td>
                                    </tr>
                                </tbody>
                            </table>

                            <!--FOSCOS Table -->
                            <table *ngIf="productType==='Foscos'"
                                class="table app-table-hover table-striped mb-0 text-left" id="data-to-export">
                                <thead>
                                    <tr>
                                        <th class="cell">S.No</th>
                                        <th class="cell">Manager Name</th>
                                        <th class="cell">Fbo Name</th>
                                        <th class="cell">Owner Name</th>
                                        <th class="cell">Bo Id</th>
                                        <th class="cell">Shop Id</th>
                                        <th class="cell">Licence Type</th>
                                        <th class="cell">Foscos Total</th>
                                        <!-- <th class="cell">State</th> -->
                                        <th class="cell">Sales Date</th>
                                        <th class="cell text-center">Sales Executive</th>
                                        <th class="cell text-center">verification Status</th>
                                        <th class="cell">Action</th>
                                        <!-- <th class="cell">Stage</th> -->
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of filteredData | paginate: { itemsPerPage: itemsNumber, currentPage: pageNumber, id: 'case-list' }; let i=index">
                                        <td class="cell"><span
                                                class="truncate">{{i+itemsNumber*(pageNumber-1)+1}}</span></td>
                                        <td class="cell"><span class="truncate text-capitalize selector text-capitalize"
                                                (click)="collectResData('Foscos', data._id)">{{data.managerName.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                            <span [title]="data.salesInfo.fboInfo.fbo_name.toLowerCase()"
                                                class="truncate text-w-150">{{data.salesInfo.fboInfo.fbo_name.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                            <span
                                                class="truncate">{{data.salesInfo.fboInfo.owner_name.toLowerCase()}}</span>
                                        </td>

                                        <td class="cell text-capitalize">
                                            <span class="truncate">{{data.salesInfo.fboInfo.boInfo.customer_id}}</span>
                                        </td>
                                        <td class="cell text-capitalize">
                                            <span class="truncate">{{data.salesInfo.fboInfo.customer_id}}</span>
                                        </td>
                                        <td class="cell"><span
                                                class="truncate">{{data.salesInfo.foscosInfo.license_category}}</span>
                                        </td>
                                        <td *ngIf="productType==='Foscos'" class="cell"><span
                                                class="truncate">{{data.salesInfo.foscosInfo.foscos_total
                                                | inrAmount}}</span></td>
                                        <td class="cell"><span
                                                class="truncate">{{getFormattedSalesDate(data.salesInfo.createdAt)}}</span>
                                        </td>
                                        <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span
                                                class="truncate">{{data.salesInfo.fboInfo.state}}</span></td> -->
                                        <td *ngIf="data.salesInfo.fboInfo && data.salesInfo.employeeInfo; else noData"
                                            class="cell text-center">
                                            <span
                                                class="truncate text-capitalize">{{data.salesInfo.employeeInfo.employee_name.toLowerCase().split('
                                                ')[0]}}</span>
                                        </td>
                                        <!-- <td class="cell text-center"><span class="truncate text-capitalize"
                                                [ngClass]="data.verificationInfo.length?'text-success':'text-danger'">
                                                {{data.verificationInfo.length?'Verified':'Pending'}}
                                            </span>
                                        </td> -->
                                        <td class="cell text-center">
                                            <span *ngIf="data.resultTextClass && !data.isForDocumentsNum"
                                                [ngClass]="data.resultTextClass" style="font-size: x-small;"
                                                class="badge align-self-baseline make-short" [title]="data.resultText">
                                                {{data.resultText}}
                                            </span>

                                            <div class="">
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-success mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.approvedDocs}}
                                                </span>
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-danger mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.pendingDocs}}
                                                </span>
                                            </div>

                                        </td>
                                        <td class="cell"><span class="truncate text-capitalize">
                                                <fa-icon class="fa-l selector mx-2"
                                                    style="margin-right: 7px; color: #1957a9;" [icon]="faEye"
                                                    (click)="viewFboDetails($event, data.salesInfo)"
                                                    title="View Detail"></fa-icon>

                                            </span>
                                        </td>
                                        <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span class="truncate">-</span>
                                        </td> -->
                                        <ng-template #noData>
                                            <td class="cell">
                                                <span class="truncate">-</span>
                                            </td>
                                        </ng-template>
                                    </tr>
                                </tbody>
                                <tbody *ngIf="!filteredData || filteredData.length===0">
                                    <tr>
                                        <td colspan="15" class="text-center fw-bold">----------------- No Data Found
                                            ----------------</td>
                                    </tr>
                                </tbody>
                            </table>

                            <!--Khadya Paaln Table -->
                            <table *ngIf="productType==='Khadya Paaln'"
                                class="table app-table-hover table-striped mb-0 text-left" id="data-to-export">
                                <thead>
                                    <tr>
                                        <th class="cell">S.No</th>
                                        <th class="cell">Manager Name</th>
                                        <th class="cell">Fbo Name</th>
                                        <th class="cell">Owner Name</th>
                                        <th class="cell">Bo Id</th>
                                        <th class="cell">Shop Id</th>
                                        <th class="cell">Khadya Total</th>
                                        <th class="cell">Sales Date</th>
                                        <th class="cell text-center">Sales Executive</th>
                                        <th class="cell text-center">verification Status</th>
                                        <th class="cell">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of filteredData | paginate: { itemsPerPage: itemsNumber, currentPage: pageNumber, id: 'case-list' }; let i=index">
                                        <td class="cell"><span
                                                class="truncate">{{i+itemsNumber*(pageNumber-1)+1}}</span>
                                        </td>
                                        <td class="cell"><span class="truncate text-capitalize selector text-capitalize"
                                                (click)="collectResData('Khadya Paaln', data._id)">{{data.managerName.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                            <span [title]="data.salesInfo.fboInfo.fbo_name.toLowerCase()"
                                                class="truncate text-w-150">{{data.salesInfo.fboInfo.fbo_name.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                            <span
                                                class="truncate">{{data.salesInfo.fboInfo.owner_name.toLowerCase()}}</span>
                                        </td>

                                        <td class="cell text-capitalize">
                                            <span class="truncate">{{data.salesInfo.fboInfo.boInfo.customer_id}}</span>
                                        </td>
                                        <td class="cell text-capitalize">
                                            <span class="truncate">{{data.salesInfo.fboInfo.customer_id}}</span>
                                        </td>
                                        
                                        <td *ngIf="productType==='Khadya Paaln'" class="cell"><span
                                                class="truncate">{{data.salesInfo.khadyaPaalnInfo.khadya_paaln_total
                                                | inrAmount}}</span></td>
                                        <td class="cell"><span
                                                class="truncate">{{getFormattedSalesDate(data.salesInfo.createdAt)}}</span>
                                        </td>
                                        <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span
                                                class="truncate">{{data.salesInfo.fboInfo.state}}</span></td> -->
                                        <td *ngIf="data.salesInfo.fboInfo && data.salesInfo.employeeInfo; else noData"
                                            class="cell text-center">
                                            <span
                                                class="truncate text-capitalize">{{data.salesInfo.employeeInfo.employee_name.toLowerCase().split('
                                                ')[0]}}</span>
                                        </td>
                                        <td class="cell text-center">
                                            <span *ngIf="data.resultTextClass && !data.isForDocumentsNum"
                                                [ngClass]="data.resultTextClass" style="font-size: x-small;"
                                                class="badge align-self-baseline make-short" [title]="data.resultText">
                                                {{data.resultText}}
                                            </span>

                                            <div class="">
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-success mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.approvedDocs}}
                                                </span>
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-danger mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.pendingDocs}}
                                                </span>
                                            </div>

                                        </td>
                                        <td class="cell"><span class="truncate text-capitalize">
                                                <fa-icon class="fa-l selector mx-2"
                                                    style="margin-right: 7px; color: #1957a9;" [icon]="faEye"
                                                    (click)="viewFboDetails($event, data.salesInfo)"
                                                    title="View Detail"></fa-icon>

                                            </span>
                                        </td>
                                        <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span class="truncate">-</span>
                                        </td> -->
                                        <ng-template #noData>
                                            <td class="cell">
                                                <span class="truncate">-</span>
                                            </td>
                                        </ng-template>
                                    </tr>
                                </tbody>
                            </table>
                            <!--Medical Table -->
                            <table *ngIf="productType==='Medical'"
                                class="table app-table-hover table-striped mb-0 text-left" id="data-to-export">
                                <thead>
                                    <tr>
                                        <th class="cell">S.No</th>
                                        <th class="cell">Manager Name</th>
                                        <th class="cell">Fbo Name</th>
                                        <th class="cell">Owner Name</th>
                                        <th class="cell">Bo Id</th>
                                        <th class="cell">Shop Id</th>
                                        <th class="cell">Recipient No.</th>
                                        <th class="cell">Medical Total</th>
                                        <th class="cell">Sales Date</th>
                                        <th class="cell text-center">Sales Executive</th>
                                        <th class="cell text-center">verification Status</th>
                                        <th class="cell">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of filteredData | paginate: { itemsPerPage: itemsNumber, currentPage: pageNumber, id: 'case-list' }; let i=index">
                                        <td class="cell"><span
                                                class="truncate">{{i+itemsNumber*(pageNumber-1)+1}}</span>
                                        </td>
                                        <td class="cell"><span class="truncate text-capitalize selector text-capitalize"
                                                (click)="collectResData('Medical', data._id)">{{data.managerName.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                            <span [title]="data.salesInfo.fboInfo.fbo_name.toLowerCase()"
                                                class="truncate text-w-150">{{data.salesInfo.fboInfo.fbo_name.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                            <span
                                                class="truncate">{{data.salesInfo.fboInfo.owner_name.toLowerCase()}}</span>
                                        </td>

                                        <td class="cell text-capitalize">
                                            <span class="truncate">{{data.salesInfo.fboInfo.boInfo.customer_id}}</span>
                                        </td>
                                        <td class="cell text-capitalize">
                                            <span class="truncate">{{data.salesInfo.fboInfo.customer_id}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo" class="cell text-center"><span
                                            (click)="recipient(data.salesInfo, 'Medical')"
                                            class="truncate active-selection">{{data.salesInfo.medicalInfo.recipient_no}}</span>
                                        </td>
                                        
                                        <td *ngIf="productType==='Medical'" class="cell"><span
                                                class="truncate">{{data.salesInfo.medicalInfo.medical_total
                                                | inrAmount}}</span></td>
                                        <td class="cell"><span
                                                class="truncate">{{getFormattedSalesDate(data.salesInfo.createdAt)}}</span>
                                        </td>
                                        <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span
                                                class="truncate">{{data.salesInfo.fboInfo.state}}</span></td> -->
                                        <td *ngIf="data.salesInfo.fboInfo && data.salesInfo.employeeInfo; else noData"
                                            class="cell text-center">
                                            <span
                                                class="truncate text-capitalize">{{data.salesInfo.employeeInfo.employee_name.toLowerCase().split('
                                                ')[0]}}</span>
                                        </td>
                                        <td class="cell text-center">
                                            <span *ngIf="data.resultTextClass && !data.isForDocumentsNum"
                                                [ngClass]="data.resultTextClass" style="font-size: x-small;"
                                                class="badge align-self-baseline make-short" [title]="data.resultText">
                                                {{data.resultText}}
                                            </span>

                                            <div class="">
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-success mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.approvedDocs}}
                                                </span>
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-danger mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.pendingDocs}}
                                                </span>
                                            </div>

                                        </td>
                                        <td class="cell"><span class="truncate text-capitalize">
                                                <fa-icon class="fa-l selector mx-2"
                                                    style="margin-right: 7px; color: #1957a9;" [icon]="faEye"
                                                    (click)="viewFboDetails($event, data.salesInfo)"
                                                    title="View Detail"></fa-icon>

                                            </span>
                                        </td>
                                        <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span class="truncate">-</span>
                                        </td> -->
                                        <ng-template #noData>
                                            <td class="cell">
                                                <span class="truncate">-</span>
                                            </td>
                                        </ng-template>
                                    </tr>
                                </tbody>
                            </table>
                            <!--Water Test Report Table -->
                            <table *ngIf="productType==='Water Test Report'"
                                class="table app-table-hover table-striped mb-0 text-left" id="data-to-export">
                                <thead>
                                    <tr>
                                        <th class="cell">S.No</th>
                                        <th class="cell">Manager Name</th>
                                        <th class="cell">Fbo Name</th>
                                        <th class="cell">Owner Name</th>
                                        <th class="cell">Bo Id</th>
                                        <th class="cell">Shop Id</th>
                                        <th class="cell">Water Service Name</th>
                                        <th class="cell">Water Test Total</th>
                                        <th class="cell">Sales Date</th>
                                        <th class="cell text-center">Sales Executive</th>
                                        <th class="cell text-center">verification Status</th>
                                        <th class="cell">Action</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr
                                        *ngFor="let data of filteredData | paginate: { itemsPerPage: itemsNumber, currentPage: pageNumber, id: 'case-list' }; let i=index">
                                        <td class="cell"><span
                                                class="truncate">{{i+itemsNumber*(pageNumber-1)+1}}</span>
                                        </td>
                                        <td class="cell"><span class="truncate text-capitalize selector text-capitalize"
                                                (click)="collectResData('Water Test Report', data._id)">{{data.managerName.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                            <span [title]="data.salesInfo.fboInfo.fbo_name.toLowerCase()"
                                                class="truncate text-w-150">{{data.salesInfo.fboInfo.fbo_name.toLowerCase()}}</span>
                                        </td>
                                        <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                            <span
                                                class="truncate">{{data.salesInfo.fboInfo.owner_name.toLowerCase()}}</span>
                                        </td>

                                        <td class="cell text-capitalize">
                                            <span class="truncate">{{data.salesInfo.fboInfo.boInfo.customer_id}}</span>
                                        </td>
                                        <td class="cell text-capitalize">
                                            <span class="truncate">{{data.salesInfo.fboInfo.customer_id}}</span>
                                        </td>
                                        <td class="cell text-center text-capitalize"><span
                                            class="truncate">{{data.salesInfo.waterTestInfo.water_test_service_name}}</span>
                                        </td>
                                        
                                        <td *ngIf="productType==='Water Test Report'" class="cell"><span
                                                class="truncate">{{data.salesInfo.waterTestInfo.water_test_total
                                                | inrAmount}}</span></td>
                                        <td class="cell"><span
                                                class="truncate">{{getFormattedSalesDate(data.salesInfo.createdAt)}}</span>
                                        </td>
                                        <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span
                                                class="truncate">{{data.salesInfo.fboInfo.state}}</span></td> -->
                                        <td *ngIf="data.salesInfo.fboInfo && data.salesInfo.employeeInfo; else noData"
                                            class="cell text-center">
                                            <span
                                                class="truncate text-capitalize">{{data.salesInfo.employeeInfo.employee_name.toLowerCase().split('
                                                ')[0]}}</span>
                                        </td>
                                        <td class="cell text-center">
                                            <span *ngIf="data.resultTextClass && !data.isForDocumentsNum"
                                                [ngClass]="data.resultTextClass" style="font-size: x-small;"
                                                class="badge align-self-baseline make-short" [title]="data.resultText">
                                                {{data.resultText}}
                                            </span>

                                            <div class="">
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-success mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.approvedDocs}}
                                                </span>
                                                <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                    [ngClass]="'bg-danger mx-1'" style="font-size: x-small;"
                                                    class="badge align-self-baseline make-short"
                                                    [title]="data.resultText">
                                                    {{data.pendingDocs}}
                                                </span>
                                            </div>

                                        </td>
                                        <td class="cell"><span class="truncate text-capitalize">
                                                <fa-icon class="fa-l selector mx-2"
                                                    style="margin-right: 7px; color: #1957a9;" [icon]="faEye"
                                                    (click)="viewFboDetails($event, data.salesInfo)"
                                                    title="View Detail"></fa-icon>

                                            </span>
                                        </td>
                                        <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span class="truncate">-</span>
                                        </td> -->
                                        <ng-template #noData>
                                            <td class="cell">
                                                <span class="truncate">-</span>
                                            </td>
                                        </ng-template>
                                    </tr>
                                </tbody>
                            </table>
                             <!--Food Labeling Table -->
                             <table *ngIf="productType==='Food Labeling'"
                             class="table app-table-hover table-striped mb-0 text-left" id="data-to-export">
                             <thead>
                                 <tr>
                                     <th class="cell">S.No</th>
                                     <th class="cell">Manager Name</th>
                                     <th class="cell">Fbo Name</th>
                                     <th class="cell">Owner Name</th>
                                     <th class="cell">Bo Id</th>
                                     <th class="cell">Shop Id</th>
                                     <th class="cell">Food Labeling Total</th>
                                     <th class="cell">Sales Date</th>
                                     <th class="cell text-center">Sales Executive</th>
                                     <th class="cell text-center">verification Status</th>
                                     <th class="cell">Action</th>
                                 </tr>
                             </thead>
                             <tbody>
                                 <tr
                                     *ngFor="let data of filteredData | paginate: { itemsPerPage: itemsNumber, currentPage: pageNumber, id: 'case-list' }; let i=index">
                                     <td class="cell"><span
                                             class="truncate">{{i+itemsNumber*(pageNumber-1)+1}}</span>
                                     </td>
                                     <td class="cell"><span class="truncate text-capitalize selector text-capitalize"
                                             (click)="collectResData('Khadya Paaln', data._id)">{{data.managerName.toLowerCase()}}</span>
                                     </td>
                                     <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                         <span [title]="data.salesInfo.fboInfo.fbo_name.toLowerCase()"
                                             class="truncate text-w-150">{{data.salesInfo.fboInfo.fbo_name.toLowerCase()}}</span>
                                     </td>
                                     <td *ngIf="data.salesInfo.fboInfo; else noData" class="cell text-capitalize">
                                         <span
                                             class="truncate">{{data.salesInfo.fboInfo.owner_name.toLowerCase()}}</span>
                                     </td>

                                     <td class="cell text-capitalize">
                                         <span class="truncate">{{data.salesInfo.fboInfo.boInfo.customer_id}}</span>
                                     </td>
                                     <td class="cell text-capitalize">
                                         <span class="truncate">{{data.salesInfo.fboInfo.customer_id}}</span>
                                     </td>
                                     
                                     <td *ngIf="productType==='Food Labeling'" class="cell"><span
                                             class="truncate">{{data.salesInfo.foodLabelingInfo.food_labeling_total
                                             | inrAmount}}</span></td>
                                     <td class="cell"><span
                                             class="truncate">{{getFormattedSalesDate(data.salesInfo.createdAt)}}</span>
                                     </td>
                                     <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span
                                             class="truncate">{{data.salesInfo.fboInfo.state}}</span></td> -->
                                     <td *ngIf="data.salesInfo.fboInfo && data.salesInfo.employeeInfo; else noData"
                                         class="cell text-center">
                                         <span
                                             class="truncate text-capitalize">{{data.salesInfo.employeeInfo.employee_name.toLowerCase().split('
                                             ')[0]}}</span>
                                     </td>
                                     <td class="cell text-center">
                                         <span *ngIf="data.resultTextClass && !data.isForDocumentsNum"
                                             [ngClass]="data.resultTextClass" style="font-size: x-small;"
                                             class="badge align-self-baseline make-short" [title]="data.resultText">
                                             {{data.resultText}}
                                         </span>

                                         <div class="">
                                             <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                 [ngClass]="'bg-success mx-1'" style="font-size: x-small;"
                                                 class="badge align-self-baseline make-short"
                                                 [title]="data.resultText">
                                                 {{data.approvedDocs}}
                                             </span>
                                             <span *ngIf="data.resultTextClass && data.isForDocumentsNum"
                                                 [ngClass]="'bg-danger mx-1'" style="font-size: x-small;"
                                                 class="badge align-self-baseline make-short"
                                                 [title]="data.resultText">
                                                 {{data.pendingDocs}}
                                             </span>
                                         </div>

                                     </td>
                                     <td class="cell"><span class="truncate text-capitalize">
                                             <fa-icon class="fa-l selector mx-2"
                                                 style="margin-right: 7px; color: #1957a9;" [icon]="faEye"
                                                 (click)="viewFboDetails($event, data.salesInfo)"
                                                 title="View Detail"></fa-icon>

                                         </span>
                                     </td>
                                     <!-- <td *ngIf="data.salesInfo.fboInfo" class="cell"><span class="truncate">-</span>
                                     </td> -->
                                     <ng-template #noData>
                                         <td class="cell">
                                             <span class="truncate">-</span>
                                         </td>
                                     </ng-template>
                                 </tr>
                             </tbody>
                         </table>
                        </div><!--//table-responsive-->

                    </div><!--//app-card-body-->
                </div><!--//app-card-->

                <!-- Page Navigator and Unit counts -->
                <div class="d-flex" *ngIf="showPagination"
                    [ngClass]="filteredData?'justify-content-between':'justify-content-end'">
                    <div *ngIf="filteredData && !forTraining" class="text-sm" style="font-size: 13px;">
                        {{filteredData.length}} filtered
                        from ({{totalCount}} {{serviceType}} Cases of {{totalCase}} total)</div>
                    <div *ngIf="filteredData && forTraining" class="text-sm" style="font-size: 13px;">
                        {{filteredData.length}} filtered
                        from {{totalCount}} {{serviceType}} Cases</div>
                    <pagination-controls previousLabel="Prev" nextLabel="Next" (pageChange)="onTableDataChange($event)"
                        id="case-list"></pagination-controls>
                </div>
            </div>
        </div>
    </div>
</div>

<ngx-loading [show]="loading"></ngx-loading>