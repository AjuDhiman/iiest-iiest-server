<div class="modal-header bg-secondary">
  <h6 *ngIf="this.serviceType === 'Fostac'" class="modal-title text-white" id="modal-basic-title">Recipients</h6>
  <h6 *ngIf="this.serviceType === 'Foscos'" class="modal-title text-white" id="modal-basic-title">Shops</h6>
  <h6 *ngIf="this.serviceType === 'HRA'" class="modal-title text-white" id="modal-basic-title">Shops</h6>

  <button type="button" class="btn-close btn-close-white" aria-label="Close" (click)="activeModal.dismiss()"></button>
</div>
<!-- *ngIf="recipientData?.length==0" -->

<div class="border-top border-dark-subtle" *ngIf="(recipientCount!==listCount && shopsCount!==listCount) && !onlyRecpList">
  <div *ngIf="serviceType !== 'HRA'" class="d-grid gap-2 d-md-flex justify-content-md-end align-items-center">
    <div class="form-check form-switch">
      <input class="form-check-input cursor-pointer" type="checkbox" role="switch" (change)="ChangeFormType($event)"
        id="flexSwitchCheckDefault" />
      <label class="form-check-label" for="flexSwitchCheckDefault">Upload Excel</label>
    </div>
    <fa-icon class="fa-lg cursor-pointer" style="color: #1d8b6a; margin:10px;" [icon]="faFileExcel"
      (click)="downloadCSV(this.serviceType === 'Fostac'? 'Fostac' : 'Foscos')" title="Download Format"></fa-icon>
  </div>
  <form [formGroup]="recipientform" autocomplete="off" [ngClass]="uploadExcel?'d-none':''" (ngSubmit)="onSubmit()"
    enctype="multipart/form-data">

    <!--Fostac FORM Start-->
    <div class="modal-body" *ngIf="this.serviceType === 'Fostac'">
      <div class="row">
        <div class="col-md-4">
          <label for="name" class="form-label">Recipient Full Name<sup>*</sup></label>
          <input type="text" id="name" class="form-control form-control-sm" placeholder="Recipient Name"
            formControlName="name" [ngClass]="{ 'is-invalid': submitted && recipient['name'].errors }" />
          <div *ngIf="submitted && recipient['name'].errors" class="invalid-feedback">
            <div *ngIf="recipient['name'].errors['required']">Recipient Name is required</div>
          </div>
        </div>

        <div class="col-md-4">
          <label for="phoneNo" class="form-label">Recipient Mobile No.<sup>*</sup></label>
          <input type="number" placeholder="Mobile No." formControlName="phoneNo" class="form-control form-control-sm"
            id="phoneNo" [ngClass]="{ 'is-invalid': submitted && recipient['phoneNo'].errors }" />
          <div *ngIf="submitted && recipient['phoneNo'].errors" class="invalid-feedback">
            <div *ngIf="recipient['phoneNo'].errors['required']">Mobile No. is required</div>
          </div>
        </div>
        <div class="col-md-4">
          <label for="email" class="form-label">Recipient Email<sup>*</sup></label>
          <input type="email" placeholder="Recipient Email" formControlName="email" class="form-control form-control-sm"
            id="email" [ngClass]="{ 'is-invalid': submitted && recipient['email'].errors }" />
          <div *ngIf="submitted && recipient['email'].errors" class="invalid-feedback">
            <div *ngIf="recipient['email'].errors['required']">Recipient Email is required</div>
          </div>
        </div>
        <div class="col-md-4">
          <label for="dob" class="form-label">Recipient DOB<sup>*</sup></label>
          <input type="date" placeholder="Recipient DOB" formControlName="dob" class="form-control form-control-sm"
            id="dob" [ngClass]="{ 'is-invalid': submitted && recipient['dob'].errors }" />
          <div *ngIf="submitted && recipient['dob'].errors" class="invalid-feedback">
            <div *ngIf="recipient['dob'].errors['required']">Recipient DOB is required</div>
          </div>
        </div>
        <div class="col-md-4">
          <label for="fatherName" class="form-label">Recipient Father Name<sup>*</sup></label>
          <input type="text" placeholder="Recipient Father Name" formControlName="fatherName"
            class="form-control form-control-sm" id="fatherName"
            [ngClass]="{ 'is-invalid': submitted && recipient['fatherName'].errors }" />
          <div *ngIf="submitted && recipient['fatherName'].errors" class="invalid-feedback">
            <div *ngIf="recipient['fatherName'].errors['required']">Recipient Father Name is required</div>
          </div>
        </div>
        <div class="col-md-4">
          <label for="recp_address" class="form-label">Recipient Address<sup>*</sup></label>
          <input type="text" placeholder="Recipient Address" formControlName="recp_address"
            class="form-control form-control-sm" id="recp_address"
            [ngClass]="{ 'is-invalid': submitted && recipient['recp_address'].errors }" />
          <div *ngIf="submitted && recipient['recp_address'].errors" class="invalid-feedback">
            <div *ngIf="recipient['recp_address'].errors['required']">Recipient Address is required</div>
          </div>
        </div>
        <div class="col-md-4">
          <label for="aadharNo" class="form-label">Recipient Aadhar no.<sup>*</sup></label>
          <input type="number" placeholder="Recipient Aadhar no." formControlName="aadharNo"
            class="form-control form-control-sm" id="aadharNo"
            [ngClass]="{ 'is-invalid': submitted && recipient['aadharNo'].errors }" />
          <div *ngIf="submitted && recipient['aadharNo'].errors" class="invalid-feedback">
            <div *ngIf="recipient['aadharNo'].errors['required']">Recipient Aadhar no. is required</div>
          </div>
        </div>
        <div class="col-md-4">
          <label for="aadhar_photo" class="form-label">Recipient Aadhar Photo<sup>*</sup></label>
          <input type="file" placeholder="Aadhar No." formControlName="aadhar_photo"
            class="form-control form-control-sm" id="aadhar_photo"
            [ngClass]="{ 'is-invalid': submitted && recipient['aadhar_photo'].errors }"
            (change)="onImageChangeFromFile($event, 'aadharPhoto')" multiple />
          <div *ngIf="submitted && recipient['aadhar_photo'].errors" class="invalid-feedback">
            <div *ngIf="recipient['aadhar_photo'].errors['required']">Recipient Aadhar Photo is required</div>
          </div>
        </div>
      </div>
    </div>
    <!--Fostac FORM Ends-->

    <div class="modal-footer text-left">
      <div>
      </div>
      <button *ngIf="this.serviceType === 'Fostac'" type="submit" class="btn btn-sm btn-outline-dark">Add
        Recipient</button>

    </div>
  </form>
  <form [ngClass]="uploadExcel===false?'d-none':''" (submit)="submitExcel()" [formGroup]="excelForm">
    <div class="modal-body">
      <div class="row">
        <div class="col-md-4">
          <label for="Excel" class="form-label">Upload Excel</label>
          <input type="file" id="Excel" formControlName="excel" class="form-control form-control-sm"
            (change)="onExcelUpload($event)" [ngClass]="{ 'is-invalid': excelSubmited && excelform['excel'].errors }">
        </div>
      </div>
      <div *ngIf="excelSubmited && excelform['excel'].errors" class="invalid-feedback">
        <div *ngIf="excelSubmited && excelform['excel'].errors['required']">Employee Image is required</div>
        <div *ngIf="excelSubmited && excelform['excel'].errors['invalidFileType']">Invalid file type Only .csv, .xlsx
          files are allowed.
        </div>
      </div>
    </div>
    <div class="modal-footer text-left">
      <button type="submit" class="btn btn-sm btn-outline-dark">Upload Excel</button>
    </div>
  </form>
</div>


<div class="row g-3 mb-4 mx-2 align-items-center justify-content-between"
  [ngClass]="recipientCount!==listCount?'':'mt-3'">
  <div class="col-auto">
    <h1 *ngIf="this.serviceType === 'Fostac'" class="app-page-title mb-0">Recipient List
      <small>({{fboData.fboInfo.fbo_name}})</small>
    </h1>
  </div>
  <div class="col-auto">
    <div class="page-utilities">
      <div class="row g-2 justify-content-start justify-content-md-end align-items-center">
        <div class="col-auto">
        </div>
        <div class="col-auto">
        </div>
        <div class="col-auto">
        </div>
      </div><!--//row-->
    </div><!--//table-utilities-->
  </div><!--//col-auto-->
</div><!--//row-->

<ngx-loading [show]="loading"></ngx-loading>

<app-recipient-list [serviceType]="serviceType" [recipientData]="recipientData" [shopData]="shopData"
  [isfostac]="isfostac" [showPagination]="showPagination"></app-recipient-list>